name: Push markdown files to dev.to repo

on:
  push:
    branches: ["master"]
    # Triggers the workflow on push events to markdown files in _posts folder
    paths: 
      - '_posts/*.md'
  workflow_dispatch:

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v2
        - name: Clone destination repo
          env:
            SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}
          run: git clone git@github.com:kunalworldwide/dev.to-deployment.git
        - name: list files
          run: ls -l

        # - name: Pushes to another repository
        #   uses: cpina/github-action-push-to-another-repository@main
        #   env:
        #     SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}
        #     with:
        #     source-directory: '_posts/'
        #     destination-github-username: 'kunalworldwide'
        #     destination-repository-name: 'dev.to-deployment'
        #     user-email: dev.topublisherbot@github.com
        #     commit-message: See ORIGIN_COMMIT from $GITHUB_REF
        #     target-branch: development
        # - name: Test get variable exported by push-to-another-repository
        #   run: echo $DESTINATION_CLONED_DIRECTORY